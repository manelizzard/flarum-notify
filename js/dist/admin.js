module.exports=function(t){var n={};function a(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=n,a.d=function(t,n,e){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)a.d(e,o,function(n){return t[n]}.bind(null,o));return e},a.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="",a(a.s=13)}([function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat["utils/saveSettings"]},function(t,n){t.exports=flarum.core.compat["components/Modal"]},function(t,n){t.exports=flarum.core.compat["components/Switch"]},function(t,n){t.exports=flarum.core.compat.app},function(t,n){t.exports=flarum.core.compat["components/Alert"]},function(t,n){t.exports=flarum.core.compat.extend},function(t,n){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,n){t.exports=flarum.core.compat["components/AdminNav"]},function(t,n){t.exports=flarum.core.compat["components/Page"]},function(t,n){t.exports=flarum.core.compat.Component},function(t,n){t.exports=flarum.core.compat["components/FieldSet"]},function(t,n){t.exports=flarum.core.compat["lib/components/LoadingIndicator"]},function(t,n,a){"use strict";a.r(n);var e=a(6),o=a(7),r=a.n(o),i=a(8),l=a.n(i),s=a(4),u=a.n(s);function c(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var p=a(5),d=a.n(p),f=a(0),h=a.n(f),v=(a(10),a(11),a(9)),g=a.n(v),y=a(3),b=a.n(y),N=a(2),w=a.n(N),k=a(1),x=a.n(k),E=function(t){function n(){for(var n,a=arguments.length,e=new Array(a),o=0;o<a;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).webhook=m.prop(app.data.settings["notify.gitter.webhook"]||""),n}c(n,t);var a=n.prototype;return a.className=function(){return"GitterSettingsModal Modal--small"},a.title=function(){return app.translator.trans("flarum-notify.admin.gitter-modal.title")},a.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.gitter-modal.webhook")),m("input",{className:"FormControl",value:this.webhook(),oninput:m.withAttr("value",this.webhook)})),m("p",null,app.translator.trans("flarum-notify.admin.gitter-modal.description",{a:m("a",{href:"https://gitter.im",tabindex:"-1",target:"_new"})},{i:m("i",null)})),m("hr",null),m("div",{className:"Form-group"},h.a.component({type:"submit",className:"Button Button--primary GitterSettingsModal-save",loading:this.loading,children:"Save Changes"}))))},a.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,x()({"notify.gitter.webhook":this.webhook()}).then(function(){return n.hide()},function(){n.loading=!1,m.redraw()})},n}(w.a),F=function(t){function n(){for(var n,a=arguments.length,e=new Array(a),o=0;o<a;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).token=m.prop(app.data.settings["notify.hipchat.token"]||""),n.room=m.prop(app.data.settings["notify.hipchat.room"]||""),n}c(n,t);var a=n.prototype;return a.className=function(){return"HipChatSettingsModal Modal--small"},a.title=function(){return app.translator.trans("flarum-notify.admin.hipchat-modal.title")},a.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.hipchat-modal.token")),m("input",{className:"FormControl",value:this.token(),oninput:m.withAttr("value",this.token)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.hipchat-modal.room")),m("input",{className:"FormControl",value:this.room(),oninput:m.withAttr("value",this.room)})),m("p",null,app.translator.trans("flarum-notify.admin.hipchat-modal.description")),m("p",null,m("b",null,app.translator.trans("flarum-notify.admin.hipchat-modal.warning"))),m("hr",null),m("div",{className:"Form-group"},h.a.component({type:"submit",className:"Button Button--primary HipChatSettingsModal-save",loading:this.loading,children:"Save Changes"}))))},a.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,app.alerts.dismiss(this.testResultAlert),x()({"notify.hipchat.token":this.token(),"notify.hipchat.room":this.room()}).then(function(){return n.hide()},function(){n.loading=!1,m.redraw()})},n}(w.a),S=function(t){function n(){for(var n,a=arguments.length,e=new Array(a),o=0;o<a;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).token=m.prop(app.data.settings["notify.slack.token"]||""),n.channel=m.prop(app.data.settings["notify.slack.channel"]||"#general"),n.username=m.prop(app.data.settings["notify.slack.username"]||"Flarum"),n}c(n,t);var a=n.prototype;return a.className=function(){return"SlackSettingsModal Modal--small"},a.title=function(){return app.translator.trans("flarum-notify.admin.slack-modal.title")},a.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.slack-modal.token")),m("input",{className:"FormControl",value:this.token(),oninput:m.withAttr("value",this.token)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.slack-modal.channel")),m("input",{className:"FormControl",value:this.channel(),oninput:m.withAttr("value",this.channel)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.slack-modal.username")),m("input",{className:"FormControl",value:this.username(),oninput:m.withAttr("value",this.username)})),m("p",null,app.translator.trans("flarum-notify.admin.slack-modal.description",{a:m("a",{href:"https://api.slack.com/web",tabindex:"-1",target:"_new"})})),m("hr",null),m("div",{className:"Form-group"},h.a.component({type:"submit",className:"Button Button--primary SlackSettingsModal-save",loading:this.loading,children:"Save Changes"}))))},a.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,app.alerts.dismiss(this.testResultAlert),x()({"notify.slack.token":this.token(),"notify.slack.channel":this.channel(),"notify.slack.username":this.username()}).then(function(){return n.hide()},function(){n.loading=!1,m.redraw()})},n}(w.a),M=function(t){function n(){for(var n,a=arguments.length,e=new Array(a),o=0;o<a;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).apiKey=m.prop(app.data.settings["notify.telegram.apiKey"]||""),n.botName=m.prop(app.data.settings["notify.telegram.botName"]||""),n.chatId=m.prop(app.data.settings["notify.telegram.chatId"]||""),n}c(n,t);var a=n.prototype;return a.className=function(){return"TelegramSettingsModal Modal--small"},a.title=function(){return app.translator.trans("flarum-notify.admin.telegram-modal.title")},a.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.telegram-modal.apiKey")),m("input",{className:"FormControl",value:this.apiKey(),oninput:m.withAttr("value",this.apiKey)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.telegram-modal.botName")),m("input",{className:"FormControl",value:this.botName(),oninput:m.withAttr("value",this.botName)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.telegram-modal.chatId")),m("input",{className:"FormControl",value:this.chatId(),oninput:m.withAttr("value",this.chatId)})),m("p",null,app.translator.trans("flarum-notify.admin.telegram-modal.description",{aBot:m("a",{href:"https://github.com/php-telegram-bot/core/blob/master/README.md#create-your-first-bot",tabindex:"-1",target:"_new"}),aChatId:m("a",{href:"http://stackoverflow.com/a/38388851/160386",tabindex:"-1",target:"_new"})})),m("hr",null),m("div",{className:"Form-group"},h.a.component({type:"submit",className:"Button Button--primary TelegramSettingsModal-save",loading:this.loading,children:"Save Changes"}))))},a.onsubmit=function(t){var n=this;t.preventDefault(),this.loading=!0,x()({"notify.telegram.apiKey":this.apiKey(),"notify.telegram.botName":this.botName(),"notify.telegram.chatId":this.chatId()}).then(function(){return n.hide()},function(){n.loading=!1,m.redraw()})},n}(w.a),A=(a(12),w.a,function(t){function n(){return t.apply(this,arguments)||this}c(n,t);var a=n.prototype;return a.init=function(){var n=this;t.prototype.init.call(this),this.loading=!1,this.fields=["discussionDeletedEvent","gitterEnabled","hipChatEnabled","telegramEnabled","newDiscussionEvent","newPostEvent","postDeletedEvent","postHiddenEvent","slackEnabled"],this.settingsPrefix="flarum-notify.",this.values={},this.fields.forEach(function(t){return n.values[t]=m.prop(app.data.settings[n.settingsPrefix+t])})},a.view=function(){return m("div",{className:"NotifyPage"},m("div",{className:"NotifyPage-header"},m("div",{className:"container"},m("h2",null,app.translator.trans("flarum-notify.admin.title")),m("p",null,app.translator.trans("flarum-notify.admin.description")))),m("form",{className:"NotifyPage-body",onsubmit:this.onsubmit.bind(this)},m("div",{className:"container"},m("fieldset",{className:"NotifyPage-services"},m("legend",null,app.translator.trans("flarum-notify.admin.services.title")),m("div",{className:"helpText"},app.translator.trans("flarum-notify.admin.services.description")),m("table",{className:"NotifyTable"},m("tr",null,m("td",null,b.a.component({state:this.values.slackEnabled()||!1,children:"Slack",onchange:this.values.slackEnabled})),m("td",null,h.a.component({className:"Button NotifyButton rounded",icon:"fas fa-cog",type:"button",onclick:function(){return app.modal.show(new S)}}))),m("tr",null,m("td",null,b.a.component({state:this.values.hipChatEnabled(),children:"Hipchat",onchange:this.values.hipChatEnabled})),m("td",null,h.a.component({className:"Button NotifyButton rounded",icon:"fas fa-cog",type:"button",onclick:function(){return app.modal.show(new F)}}))),m("tr",null,m("td",null,b.a.component({state:this.values.gitterEnabled(),children:"Gitter",onchange:this.values.gitterEnabled})),m("td",null,h.a.component({className:"Button NotifyButton rounded",icon:"fas fa-cog",type:"button",onclick:function(){return app.modal.show(new E)}}))),m("tr",null,m("td",null,b.a.component({state:this.values.telegramEnabled(),children:"Telegram",onchange:this.values.telegramEnabled})),m("td",null,h.a.component({className:"Button NotifyButton rounded",icon:"fas fa-cog",type:"button",onclick:function(){return app.modal.show(new M)}}))))),m("hr",null),m("fieldset",{className:"NotifyPage-events"},m("legend",null,app.translator.trans("flarum-notify.admin.events.title")),m("div",{class:"helpText"},app.translator.trans("flarum-notify.admin.events.description")),m("table",{className:"NotifyTable"},m("tr",null,m("td",null,b.a.component({state:this.values.newDiscussionEvent(),children:app.translator.trans("flarum-notify.admin.events.discussion_started"),onchange:this.values.newDiscussionEvent}))),m("tr",null,m("td",null,b.a.component({state:this.values.discussionDeletedEvent(),children:app.translator.trans("flarum-notify.admin.events.discussion_deleted"),onchange:this.values.discussionDeletedEvent}))),m("tr",null,m("td",null,b.a.component({state:this.values.newPostEvent(),children:app.translator.trans("flarum-notify.admin.events.post_posted"),onchange:this.values.newPostEvent}))),m("tr",null,m("td",null,b.a.component({state:this.values.postDeletedEvent(),children:app.translator.trans("flarum-notify.admin.events.post_deleted"),onchange:this.values.postDeletedEvent}))),m("tr",null,m("td",null,b.a.component({state:this.values.postHiddenEvent(),children:app.translator.trans("flarum-notify.admin.events.post_hidden"),onchange:this.values.postHiddenEvent}))))),m("hr",null),h.a.component({type:"submit",className:"Button Button--primary",children:"Save",loading:this.loading}))))},a.onsubmit=function(t){var n=this;if(t.preventDefault(),!this.loading){this.loading=!0,app.alerts.dismiss(this.successAlert);var a={};this.fields.forEach(function(t){return a[n.settingsPrefix+t]=n.values[t]()}),x()(a).then(function(){app.alerts.show(n.successAlert=new d.a({type:"success",children:app.translator.trans("core.admin.basics.saved_message")})),n.loading=!1,m.redraw()})}},n}(g.a));u.a.initializers.add("flarum-notify",function(t){u.a.routes.notify={path:"/notify",component:A.component()},u.a.extensionSettings["flarum-notify"]=function(){return m.route(u.a.route("notify"))},Object(e.extend)(l.a.prototype,"items",function(t){t.add("notify",r.a.component({href:u.a.route("notify"),icon:"fas fa-bell",children:u.a.translator.trans("flarum-notify.admin.title"),description:u.a.translator.trans("flarum-notify.admin.description")}))})})}]);
//# sourceMappingURL=admin.js.map