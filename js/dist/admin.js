module.exports=function(t){var a={};function n(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=a,n.d=function(t,a,e){n.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,a){if(1&a&&(t=n(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var o in t)n.d(e,o,function(a){return t[a]}.bind(null,o));return e},n.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(a,"a",a),a},n.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},n.p="",n(n.s=14)}([function(t,a){t.exports=flarum.core.compat["components/Button"]},function(t,a){t.exports=flarum.core.compat["utils/saveSettings"]},function(t,a){t.exports=flarum.core.compat["components/Modal"]},function(t,a){t.exports=flarum.core.compat.app},function(t,a){t.exports=flarum.core.compat["components/Alert"]},function(t,a){t.exports=flarum.core.compat.extend},function(t,a){t.exports=flarum.core.compat["utils/ItemList"]},function(t,a){t.exports=flarum.core.compat["components/Switch"]},function(t,a){t.exports=flarum.core.compat["components/AdminLinkButton"]},function(t,a){t.exports=flarum.core.compat["components/AdminNav"]},function(t,a){t.exports=flarum.core.compat["components/Page"]},function(t,a){t.exports=flarum.core.compat.Component},function(t,a){t.exports=flarum.core.compat["components/FieldSet"]},function(t,a){t.exports=flarum.core.compat["lib/components/LoadingIndicator"]},function(t,a,n){"use strict";n.r(a);var e=n(5),o=n(8),r=n.n(o),i=n(9),l=n.n(i),s=n(3),u=n.n(s);function p(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a}var c=n(4),d=n.n(c),f=n(0),h=n.n(f),v=(n(11),n(12),n(6)),y=n.n(v),g=n(10),b=n.n(g),N=n(7),w=n.n(N),k=n(2),x=n.n(k),F=n(1),A=n.n(F),E=function(t){function a(){for(var a,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).webhook=m.prop(app.data.settings["notify.gitter.webhook"]||""),a}p(a,t);var n=a.prototype;return n.className=function(){return"GitterSettingsModal Modal--small"},n.title=function(){return app.translator.trans("flarum-notify.admin.gitter-modal.title")},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.gitter-modal.webhook")),m("input",{className:"FormControl",value:this.webhook(),oninput:m.withAttr("value",this.webhook)})),m("p",null,app.translator.trans("flarum-notify.admin.gitter-modal.description",{a:m("a",{href:"https://gitter.im",tabindex:"-1",target:"_new"})},{i:m("i",null)})),m("hr",null),m("div",{className:"Form-group"},h.a.component({type:"submit",className:"Button Button--primary GitterSettingsModal-save",loading:this.loading,children:"Save Changes"}))))},n.onsubmit=function(t){var a=this;t.preventDefault(),this.loading=!0,A()({"notify.gitter.webhook":this.webhook()}).then(function(){return a.hide()},function(){a.loading=!1,m.redraw()})},a}(x.a),S=function(t){function a(){for(var a,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).token=m.prop(app.data.settings["notify.hipchat.token"]||""),a.room=m.prop(app.data.settings["notify.hipchat.room"]||""),a}p(a,t);var n=a.prototype;return n.className=function(){return"HipChatSettingsModal Modal--small"},n.title=function(){return app.translator.trans("flarum-notify.admin.hipchat-modal.title")},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.hipchat-modal.token")),m("input",{className:"FormControl",value:this.token(),oninput:m.withAttr("value",this.token)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.hipchat-modal.room")),m("input",{className:"FormControl",value:this.room(),oninput:m.withAttr("value",this.room)})),m("p",null,app.translator.trans("flarum-notify.admin.hipchat-modal.description")),m("p",null,m("b",null,app.translator.trans("flarum-notify.admin.hipchat-modal.warning"))),m("hr",null),m("div",{className:"Form-group"},h.a.component({type:"submit",className:"Button Button--primary HipChatSettingsModal-save",loading:this.loading,children:"Save Changes"}))))},n.onsubmit=function(t){var a=this;t.preventDefault(),this.loading=!0,app.alerts.dismiss(this.testResultAlert),A()({"notify.hipchat.token":this.token(),"notify.hipchat.room":this.room()}).then(function(){return a.hide()},function(){a.loading=!1,m.redraw()})},a}(x.a),M=function(t){function a(){for(var a,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).token=m.prop(app.data.settings["notify.slack.token"]||""),a.channel=m.prop(app.data.settings["notify.slack.channel"]||"#general"),a.username=m.prop(app.data.settings["notify.slack.username"]||"Flarum"),a}p(a,t);var n=a.prototype;return n.className=function(){return"SlackSettingsModal Modal--small"},n.title=function(){return app.translator.trans("flarum-notify.admin.slack-modal.title")},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.slack-modal.token")),m("input",{className:"FormControl",value:this.token(),oninput:m.withAttr("value",this.token)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.slack-modal.channel")),m("input",{className:"FormControl",value:this.channel(),oninput:m.withAttr("value",this.channel)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.slack-modal.username")),m("input",{className:"FormControl",value:this.username(),oninput:m.withAttr("value",this.username)})),m("p",null,app.translator.trans("flarum-notify.admin.slack-modal.description",{a:m("a",{href:"https://api.slack.com/web",tabindex:"-1",target:"_new"})})),m("hr",null),m("div",{className:"Form-group"},h.a.component({type:"submit",className:"Button Button--primary SlackSettingsModal-save",loading:this.loading,children:"Save Changes"}))))},n.onsubmit=function(t){var a=this;t.preventDefault(),this.loading=!0,app.alerts.dismiss(this.testResultAlert),A()({"notify.slack.token":this.token(),"notify.slack.channel":this.channel(),"notify.slack.username":this.username()}).then(function(){return a.hide()},function(){a.loading=!1,m.redraw()})},a}(x.a),C=function(t){function a(){for(var a,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(a=t.call.apply(t,[this].concat(e))||this).apiKey=m.prop(app.data.settings["notify.telegram.apiKey"]||""),a.botName=m.prop(app.data.settings["notify.telegram.botName"]||""),a.chatId=m.prop(app.data.settings["notify.telegram.chatId"]||""),a}p(a,t);var n=a.prototype;return n.className=function(){return"TelegramSettingsModal Modal--small"},n.title=function(){return app.translator.trans("flarum-notify.admin.telegram-modal.title")},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.telegram-modal.apiKey")),m("input",{className:"FormControl",value:this.apiKey(),oninput:m.withAttr("value",this.apiKey)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.telegram-modal.botName")),m("input",{className:"FormControl",value:this.botName(),oninput:m.withAttr("value",this.botName)})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("flarum-notify.admin.telegram-modal.chatId")),m("input",{className:"FormControl",value:this.chatId(),oninput:m.withAttr("value",this.chatId)})),m("p",null,app.translator.trans("flarum-notify.admin.telegram-modal.description",{aBot:m("a",{href:"https://github.com/php-telegram-bot/core/blob/master/README.md#create-your-first-bot",tabindex:"-1",target:"_new"}),aChatId:m("a",{href:"http://stackoverflow.com/a/38388851/160386",tabindex:"-1",target:"_new"})})),m("hr",null),m("div",{className:"Form-group"},h.a.component({type:"submit",className:"Button Button--primary TelegramSettingsModal-save",loading:this.loading,children:"Save Changes"}))))},n.onsubmit=function(t){var a=this;t.preventDefault(),this.loading=!0,A()({"notify.telegram.apiKey":this.apiKey(),"notify.telegram.botName":this.botName(),"notify.telegram.chatId":this.chatId()}).then(function(){return a.hide()},function(){a.loading=!1,m.redraw()})},a}(x.a),_=(n(13),x.a,function(t){function a(){return t.apply(this,arguments)||this}p(a,t);var n=a.prototype;return n.init=function(){var a=this;t.prototype.init.call(this),this.loading=!1,this.fields=["discussionDeletedEvent","gitterEnabled","hipChatEnabled","telegramEnabled","newDiscussionEvent","newPostEvent","postDeletedEvent","postHiddenEvent","slackEnabled"],this.settingsPrefix="flarum-notify.",this.values={},this.fields.forEach(function(t){return a.values[t]=m.prop(app.data.settings[a.settingsPrefix+t])})},n.view=function(){var t=this;return m("div",{className:"NotifyPage"},m("div",{className:"NotifyPage-header"},m("div",{className:"container"},m("h2",null,app.translator.trans("flarum-notify.admin.title")),m("p",null,app.translator.trans("flarum-notify.admin.description")))),m("form",{className:"NotifyPage-body",onsubmit:this.onsubmit.bind(this)},m("div",{className:"container"},m("fieldset",{className:"NotifyPage-services"},m("legend",null,app.translator.trans("flarum-notify.admin.services.title")),m("div",{className:"helpText"},app.translator.trans("flarum-notify.admin.services.description")),m("table",{className:"NotifyTable"},this.connectorItems().toArray().map(function(a){return m("tr",null,m("td",null,w.a.component({disabled:!app.data.flarumNotify[a.name+"Available"],state:t.values[a.name+"Enabled"]()||!1,children:a.label,onchange:t.values[a.name+"Enabled"]}),m("p",{class:"unavailable-hint"},app.data.flarumNotify[a.name+"Available"]?null:app.translator.trans("flarum-notify.admin.services.unavailable",{a:m("a",{href:"https://github.com/manelizzard/flarum-notify#installation",target:"_new"})}))),m("td",null,h.a.component({disabled:!app.data.flarumNotify[a.name+"Available"],className:"Button NotifyButton rounded",icon:"fas fa-cog fa-fw",type:"button",onclick:function(){return app.modal.show(new a.modal)}})))}))),m("hr",null),m("fieldset",{className:"NotifyPage-events"},m("legend",null,app.translator.trans("flarum-notify.admin.events.title")),m("div",{class:"helpText"},app.translator.trans("flarum-notify.admin.events.description")),m("table",{className:"NotifyTable"},this.eventItems().toArray().map(function(a){return m("tr",null,m("td",null,w.a.component({state:t.values[a.name](),children:a.label,onchange:t.values[a.name]})))}))),m("hr",null),h.a.component({type:"submit",className:"Button Button--primary",children:"Save",loading:this.loading}))))},n.connectorItems=function(){var t=new y.a;return t.add("slack",{name:"slack",label:"Slack",modal:M}),t.add("hipChat",{name:"hipChat",label:"HipChat",modal:S}),t.add("gitter",{name:"gitter",label:"Gitter",modal:E}),t.add("telegram",{name:"telegram",label:"Telegram",modal:C}),t},n.eventItems=function(){var t=new y.a;return t.add("newDiscussionEvent",{name:"newDiscussionEvent",label:app.translator.trans("flarum-notify.admin.events.discussion_started")}),t.add("discussionDeletedEvent",{name:"discussionDeletedEvent",label:app.translator.trans("flarum-notify.admin.events.discussion_deleted")}),t.add("newPostEvent",{name:"newPostEvent",label:app.translator.trans("flarum-notify.admin.events.post_posted")}),t.add("postDeletedEvent",{name:"postDeletedEvent",label:app.translator.trans("flarum-notify.admin.events.post_deleted")}),t.add("postHiddenEvent",{name:"postHiddenEvent",label:app.translator.trans("flarum-notify.admin.events.post_hidden")}),t},n.onsubmit=function(t){var a=this;if(t.preventDefault(),!this.loading){this.loading=!0,app.alerts.dismiss(this.successAlert);var n={};this.fields.forEach(function(t){return n[a.settingsPrefix+t]=a.values[t]()}),A()(n).then(function(){app.alerts.show(a.successAlert=new d.a({type:"success",children:app.translator.trans("core.admin.basics.saved_message")})),a.loading=!1,m.redraw()})}},a}(b.a));u.a.initializers.add("manelizzard-notify",function(t){u.a.routes.notify={path:"/notify",component:_.component()},u.a.extensionSettings["flarum-notify"]=function(){return m.route(u.a.route("notify"))},Object(e.extend)(l.a.prototype,"items",function(t){t.add("notify",r.a.component({href:u.a.route("notify"),icon:"fas fa-bell",children:u.a.translator.trans("flarum-notify.admin.title"),description:u.a.translator.trans("flarum-notify.admin.description")}))})}),n.d(a,"NotifyPage",function(){return _})}]);
//# sourceMappingURL=admin.js.map